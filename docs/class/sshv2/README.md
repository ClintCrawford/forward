## 基本介绍

* 支持凡是使用SSH协议第2版本进行远程控制的设备（可以是网络设备，也可以是Linux/Unix服务器）。
* 使用Pramiko作为远程登录模块。

## 功能方法

* init
 
    在登录设备之前，Forward需要取得登录设备的基本信息，诸如IP地址、设备型号、账号密码、用户名、特权模式密码等；同时需要设定一些初始化参数，用于记录程序运行状态。
  * ip：目标设备的IP地址。
  * username：目标设备的用户名。
  * password：目标设备的密码。
  * port：目标设备的端口，默认是22。
  * timeout：接收消息超时时间，在该时间之外，如果远程设备再没有消息返回，而程序仍然在等待接收消息，则程序会抛出超时的错误。默认时间为30秒钟。
  * privilegePw：如果您想在某些厂家的设备上切换到Enable特权模式时可能需要这个密码，如果您切换到特权模式并且设备需要您提供该密码时，您没有提供，那么程序的切换将会失败。
  * isLogin：Forward用于标记等该设备是否是成功的，如果登录是成功的，其值为True，反之为False；如果为False，您不能继续对该设备进行任何操作。
  * isEnable：闲置的参数，留待日后使用。
  * channel：存放真正的SSH会话连接通道，Forward所有的内部命令发送与接收，均使用该通道进行
  * shell：在channel的基础上，封装为shell会话，这便于Forward内部程序之间的交互。
  * basePrompt：基本的设备主机提示符，例如Linux的[root@localhost.localhost] #，最后的'#'，Forward需要一个初始的值，用于匹配是否有这样的字符出现，以便于识别一个命令是否执行完毕。
  * prompt：设备完整的主机提示符，比如：[root@localhost.localhost] #，不过，我们并不建议您取得改值。因为在command接口下，很可能发生执行了使主机提示符发生变化的命令，而prompt值未被更新的情况。
  * moreFlag：用于识别当您执行一个命令后，设备以分页的形式返回结果，当被识别到含有分页特征时，Forward会自动向设备发送回车（Enter）将会自动为您取得全部信息。
  * mode：用于标记网络设备上，当前命令行所处模式级别：1表示普通模式；2表示特权模式；3表示配置模式；4表示接口模式，更多介绍参见[网络设备命令行所处模式](/docs/class/mode)。

* login(ip, username, password, **kwargs)

    Forward调用这个接口进行登录的操作(参数来自init)，后台调用的是[sshv2](lib/forward/utils/sshv2.py)进行的，此处Forward会判断调用是否成功，如果成功，Forwar会进行进一步的程序处理，比如取得shell环境、清除登陆后设备发送的欢迎信息、设置超时时间(timeout)同时还会判断登录设备是否遇到密码过期提醒需要修改的情况，以及取得主机提示符，比如     [root@localhost ] # ，当登录就绪后，您可以使用Forward的execute接口或Command接口进行命令的执行。

* logout

    登出设备，Forward在退出之前会通过特殊接口调用该方法进行注销而无需您额外调用，除非您确实想注销某个设备的会话连接。
